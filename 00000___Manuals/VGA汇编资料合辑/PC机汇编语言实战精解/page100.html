<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<title>第5章 子过程和串处理</title>
</head>

<body>
<style type="text/css">
body {
	background-color: #c0c0c0;
}

table {
	background-color: #c0c0c0;
	line-height: 24px;
}
</style>
<!导航条>
<p><a href="content1.html">目录</a> <a href="page99.html">上一页</a> <a href="page101.html">下一页</a> <a href="page116.html">下一章</a></p>
<table 	border=0 align="center" width=800 frame="box" rules="none">
<!标尺行>
<tr>
<td width=3%></td><td width=6%></td><td width=1%></td>
<td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td>
<td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td>
<td width=1%></td><td width=6%></td><td width=3%></td>
</tr>
<!页眉行>
<tr height=60 valign="bottom">
<td></td><td>-100-</td><td></td> <!页码>
<td colspan=6>PC机汇编语言实战精解</td><td colspan=4></td><td colspan=6 align="right"><img src="icons/flag.gif"></td> <!书名>
<td></td><td></td><td></td> <!右侧空白>
</tr>
<!页眉线>
<tr valign="top">
<td></td><td colspan=20><hr></td><td></td>
</tr>

<!正文>
<font face="宋体" lang="ZH-CN" size=3>

<tr height=20><td colspan=22></td></tr> <!顶部空白>

<tr>
<td></td><td></td> <!左边距>
<td colspan=18>
　　继续使用"G"命令在CS:000C处设置断点，同时从键盘输入字符串"ASSEMBLY"并回车。
</td>
<td></td><td></td> <!右边距>
</tr>

<tr>
<td></td><td></td> <!左边距>
<td colspan=9>-g=8 c[Enter]</td><td colspan=9></td>
<td></td><td></td> <!右边距>
</tr>
<tr>
<td></td><td></td> <!左边距>
<td colspan=5>assembly[Enter]</td><td colspan=13><font face="楷体_GB2312" size=2>键盘输入的字符串</font></td>
<td></td><td></td> <!右边距>
</tr>
<tr>
<td></td><td></td> <!左边距>
<td colspan=2>AX=0A0D</td><td colspan=2>BX=0000</td><td colspan=2>CX=0020</td><td colspan=2>DX=0000</td><td colspan=2>SP=0000</td><td colspan=2>BP=0000</td><td colspan=2>SI=0000</td><td colspan=2>DI=0000</td><td colspan=2></td>
<td></td><td></td> <!右边距>
</tr>
<tr>
<td></td><td></td> <!左边距>
<td colspan=2>DS=0E8E</td><td colspan=2>ES=0E7E</td><td colspan=2>SS=0E8E</td><td colspan=2>CS=0E8F</td><td colspan=2>IP=000C</td>
<td colspan=5>NV UP EI PL NZ NA PO NC</td><td colspan=3></td>
<td></td><td></td> <!右边距>
</tr>
<tr>
<td></td><td></td> <!左边距>
<td colspan=2>0E8F:000C</td><td colspan=2>B44C</td><td colspan=6>MOV AH,4C</td>
<td colspan=8></td>
<td></td><td></td> <!右边距>
</tr>

<tr>
<td></td><td></td> <!左边距>
<td colspan=18>
　　现在我们再次观察一下字符串缓冲区，看看有什么变化。
</td>
<td></td><td></td> <!右边距>
</tr>

<tr>
<td></td><td></td> <!左边距>
<td colspan=3>d0:f</td><td colspan=15><font face="楷体_GB2312" size=2>字符串计数值发生变化，说明从键盘输入了8个字符</font></td>
<td></td><td></td> <!右边距>
</tr>
<tr>
<td></td><td></td> <!左边距>
<td colspan=2>0E8E:0000</td><td colspan=11>0A 08 61 73 73 65 6D 62-6C 79 0D 20 00 00 00 00</td><td colspan=5>..assembly. ....</td>
<td></td><td></td> <!右边距>
</tr>
<tr>
<td></td><td></td> <!左边距>
<td colspan=2><font face="楷体_GB2312" size=2></font></td><td colspan=2></td><td colspan=9><font face="楷体_GB2312" size=2>键盘输入的字符串</font></td><td colspan=5></td>
<td></td><td></td> <!右边距>
</tr>

<tr>
<td></td><td></td> <!左边距>
<td colspan=18>
　　不难看出字节1是由DOS填写的，这个数字并不包括末尾的回车符；输入的字符串末尾只有回车符，无换行符。<br>
　　采用这个功能不仅编程简单，而且DOS还会根据我们给定的字节0的值限制输入字符的数量，同时如果我们输入有错，我们还可以用退格键修改。运行这个程序试一下就能验证这两个特点。<br>
　　关于字符串的输出我们以前已经讨论了最简单的方法--调用INT 21H的9号功能。这个功能也有一些缺陷，比如说我们能否用此功能输出这个字符串--"PRICE $1.00"？很明显屏幕上根本看不到"1.00"，因为"$"表示字符串结束。<br>
　　解决方法不难，自编一段程序逐个输出每个字符即可。请看下例：<br>
OUTSTR.ASM
</td>
<td></td><td></td> <!右边距>
</tr>

<tr>
<td></td><td></td> <!左边距>
<td colspan=2>
data<br>
<br>
mess<br>
data<br>
<br>
code<br>
<br>
main<br>
<br>
<br>
<br>
outchar:<br>
<br>
<br>
<br>
</td>
<td colspan=2>
segment<br>
assume<br>
db'Price: <br>
ends<br>
<br>
segment<br>
assume<br>
proc<br>
mov<br>
mov<br>
mov<br>
<br>
mov<br>
cmp<br>
jz
</td>
<td colspan=5>
<br>
ds:data<br>
$1.00',0dh,0ah,0<br>
<br>
<br>
<br>
cs:code<br>
far<br>
ax,data<br>
ds,ax<br>
bx,offset mess<br>
<br>
dl,byte ptr [bx]<br>
dl,0<br>
exit
</td>
<td colspan=9>
<br>
<br>
；定义一个中间含'$'符的字符串<br>
<br>
<br>
<br>
<br>
<br>
；初始化DS寄存器指向数据段<br>
<br>
；BX寄存器指向字符串首<br>
<br>
；取一个字符送入DL寄存器<br>
；是字符串结尾吗？<br>
；是结尾则结束程序
</td>
<td></td><td></td> <!右边距>
</tr>

</font>

<!页脚线>
<tr valign="top">
<td></td><td colspan=20><hr></td><td></td>
</tr>
<!页脚>
<tr height=60 valign="top">
<td></td><td></td>
<td colspan=9><i>Copyright &copy; 2004-2005 <a href="mailto:webmaster@nucstorm.com">Chunk Lee</a></i></td>
<td colspan=9 align="right"><i><a href="http://www.nucstorm.com" target="_top">www.nucstorm.com</a></i></td>
<td></td><td></td>
</tr>
</table>
<!导航条>
<p align="right"><a href="content1.html">目录</a> <a href="page99.html">上一页</a> <a href="page101.html">下一页</a> <a href="page116.html">下一章</a></p>
</body>
</html>
