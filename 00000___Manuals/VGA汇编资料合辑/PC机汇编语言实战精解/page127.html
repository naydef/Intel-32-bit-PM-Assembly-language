<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<title>第6章 文字输出与键盘输入</title>
</head>

<body>
<style type="text/css">
body {
	background-color: #c0c0c0;
}

table {
	background-color: #c0c0c0;
	line-height: 24px;
}
</style>
<!导航条>
<p><a href="content1.html">目录</a> <a href="page126.html">上一页</a> <a href="page128.html">下一页</a> <a href="page168.html">下一章</a></p>
<table border=0 align="center" width=800 frame="box" rules="none">
<!标尺行>
<tr>
<td width=3%></td><td width=6%></td><td width=1%></td> <!左侧空白>
<td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td>
<td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td>
<td width=1%></td><td width=6%></td><td width=3%></td> <!右侧空白>
</tr>

<!页眉行>
<tr height=60 valign="bottom">
<td></td><td></td><td></td>
<td colspan=6><img src="icons/flag.gif"></td><td colspan=4></td><td colspan=6 align="right">第6章 文字输出与键盘输入</td> <!章节名>
<td></td><td>-127-</td><td></td> <!页码>
</tr>
<!页眉线>
<tr valign="top">
<td></td><td colspan=20><hr></td><td></td>
</tr>
<!正文>
<font face="宋体" lang="ZH-CN" size=3>
<tr height=20><td colspan=22></td></tr> <!顶部空白>

<tr>
<td></td><td></td> <!左边距>
<td colspan=2>
<br>
<br>
<br>
；*等待*<br>
<br>
<br>
；******<br>
<br>
end_out:<br>
<br>
<br>
main<br>
code<br>
<br>
</td>
<td colspan=2>
inc<br>
mov<br>
int<br>
*********<br>
mov<br>
int<br>
*********<br>
jmp<br>
<br>
mov<br>
int<br>
endp<br>
ends<br>
end
</td>
<td colspan=6>
dl<br>
ah,2<br>
10h<br>
**************<br>
ah,0　　　 ；*<br>
16h　　　　；*<br>
**************<br>
outloop<br>
<br>
ah,4ch<br>
21h<br>
<br>
<br>
main
</td>
<td colspan=8>
；光标所在列加1<br>
；利用10H中断的02H功能<br>
；将光标移动到下一列<br>
<br>
<br>
<br>
<br>
；转至OUTLOOP输出下一个字符<br>
<br>
；结束进程<br>
<br>
<br>
<br>
<br>
</td>
<td></td><td></td> <!右边距>
</tr>

<tr>
<td></td><td></td> <!左边距>
<td colspan=18>
　　这里有必要说明一下返回CX中"光标类型"的含义。大家都知道文本屏幕上的光标的形状是可变的，最明显的就是当我们使用DOS中的编辑器"EDIT"时，在插入状态下光标是一粗横线，而按下"Insert"键后光标会变成一个方块。所以所谓光标类型其实就是指光标的高度。<br>
　　当程序使用03H功能取得光标位置时，BIOS会把光标的高度通过CX寄存器返回，CH是光标起始扫描线，CL是光标终止扫描线。注意这里所说的扫描线是指在一个字符空间内的位置。请看下面用DEBUG跟踪的结果：
</td>
<td></td><td></td> <!右边距>
</tr>

<tr>
<td></td><td></td> <!左边距>
<td colspan=18>C:\ASM\>DEBUG DISPSTR2.EXE[Enter]</td>
<td></td><td></td> <!右边距>
</tr>
<tr>
<td></td><td></td> <!左边距>
<td colspan=18>-g=0 b[Enter]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font face="楷体_GB2312" size=2>光标类型</font>&nbsp;&nbsp;&nbsp;&nbsp;<font face="楷体_GB2312" size=2>光标位置</font></td>
<td></td><td></td> <!右边距>
</tr>
<tr>
<td></td><td></td> <!左边距>
<td colspan=2>AX=0310</td><td colspan=2>BX=0000</td><td colspan=2>CX=0D0E</td><td colspan=2>DX=1800</td><td colspan=2>SP=0000</td><td colspan=2>BP=0000</td><td colspan=2>SI=0000</td><td colspan=2>DI=0000</td><td colspan=2></td>
<td></td><td></td> <!右边距>
</tr>
<tr>
<td></td><td></td> <!左边距>
<td colspan=2>DS=0A10</td><td colspan=2>ES=0A00</td><td colspan=2>SS=0A10</td><td colspan=2>CS=0A12</td><td colspan=2>IP=000B</td>
<td colspan=5>NV UP EI PL NZ NA PO NC</td><td colspan=3></td>
<td></td><td></td> <!右边距>
</tr>
<tr>
<td></td><td></td> <!左边距>
<td colspan=2>0A12:000B</td><td colspan=2>B314</td><td colspan=6>MOV BL,14</td><td colspan=4></td><td colspan=4></td>
<td></td><td></td> <!右边距>
</tr>

<tr>
<td></td><td></td> <!左边距>
<td colspan=18>
　　返回的光标类型为0D0EH，说明光标起始于第13线，终止于14线。无论光标在屏幕的哪个位置，这两个数字都不会变。VGA卡全屏共有480根扫描线，每个字符占16根线，因此VGA卡的光标起始线和终止线决不会大于16。<br>
　　既然光标形状是可以改变的，那么有没有方法通过程序改变光标类型呢？BIOS为我们提供了一个功能调用--01H功能，这个功能专用于改变光标类型：
</td>
<td></td><td></td> <!右边距>
</tr>

<tr>
<td></td><td></td> <!左边距>
<td colspan=3 align="center"><img src="icons/note.gif"></td>
<td colspan=15>
功能号：01H<br>
用　途：改变光标类型<br>
参　数：CH=光标起始行（0-15）<br>
　　　　CL=光标结束行（0-15）<br>
调　用：INT 10H<br>
返　回：无
</td>
<td></td><td></td> <!右边距>
</tr>

<tr>
<td></td><td></td> <!左边距>
<td colspan=18>
　　下面的程序演示了这个功能调用的应用，程序中又出现了一个新的条件转移指令：
</td>
<td></td><td></td> <!右边距>
</tr>

</font>

<!页脚线>
<tr valign="top">
<td></td><td colspan=20><hr></td><td></td>
</tr>
<!页脚>
<tr height=60 valign="top">
<td></td><td></td>
<td colspan=9><i>Copyright &copy; 2004-2005 <a href="mailto:webmaster@nucstorm.com">Chunk Lee</a></i></td>
<td colspan=9 align="right"><i><a href="http://www.nucstorm.com" target="_top">www.nucstorm.com</a></i></td>
<td></td><td></td>
</tr>
</table>
<!导航条>
<p align="right"><a href="content1.html">目录</a> <a href="page126.html">上一页</a> <a href="page128.html">下一页</a> <a href="page168.html">下一章</a></p>
</body>
</html>
