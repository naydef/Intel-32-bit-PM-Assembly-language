<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<title>第6章 文字输出与键盘输入</title>
</head>

<body>
<style type="text/css">
body {
	background-color: #c0c0c0;
}

table {
	background-color: #c0c0c0;
	line-height: 24px;
}
</style>
<!导航条>
<p><a href="content1.html">目录</a> <a href="page141.html">上一页</a> <a href="page143.html">下一页</a> <a href="page168.html">下一章</a></p>
<table 	border=0 align="center" width=800 frame="box" rules="none">
<!标尺行>
<tr>
<td width=3%></td><td width=6%></td><td width=1%></td>
<td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td>
<td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td>
<td width=1%></td><td width=6%></td><td width=3%></td>
</tr>
<!页眉行>
<tr height=60 valign="bottom">
<td></td><td>-142-</td><td></td> <!页码>
<td colspan=6>PC机汇编语言实战精解</td><td colspan=4></td><td colspan=6 align="right"><img src="icons/flag.gif"></td> <!书名>
<td></td><td></td><td></td> <!右侧空白>
</tr>
<!页眉线>
<tr valign="top">
<td></td><td colspan=20><hr></td><td></td>
</tr>

<!正文>
<font face="宋体" lang="ZH-CN" size=3>

<tr height=20><td colspan=22></td></tr> <!顶部空白>

<tr>
<td></td><td></td> <!左边距>
<td colspan=18>
　　为了解决这个问题，PC电脑的制造者特意在机器中安装了一片ROM存储器，里面有一组程序（习惯上称这组程序是"固化"的程序），这组程序就是通常所说的BIOS。这片ROM非常重要，没有这片ROM则电脑是根本不能启动的。更为重要的是这片ROM为程序设计者提供了一些最最常用的"子程序"，这些子程序可以完成诸如显示文字或读取磁盘等功能，程序员只要使用"INT"指令很简单地调用这些子程序完成一些较为复杂的工作。这一层次就是一般所说的"BIOS"层。<br>
　　由于有现成的子程序可以调用，所以在这一层次上设计程序就很简单，而且程序容易移植到别的机型上，只要这些机型具有相同的中断号和功能号。这一层次的缺点在于程序要损失一些速度和灵活性。<br>
　　第三个层次是由操作系统的设计者提供的，这就是前面所说的"DOS API"。不过这里有必要多说一点，DOS系统允许用户使用"DEVICE"命令调入一些"设备驱动程序"，这些驱动程序可以控制一些"非标准"设备（不能由BIOS控制的设备），比如CD-ROM。程序员可以通过调用这些驱动程序来操作这些设备，这也能算上是在DOS层编程。<br>
　　这一层次具有最好的可移植性，同时也具有最低的效率和灵活性，举个例子，通过BIOS编程显示字符可以方便地控制字符的属性，而通过DOS编程就无法做到这一点。<br>
　　既然我们可以在三个层次上设计程序，那么究竟在工作哪个层次上就有一些值得考虑的地方：需要效率和灵活性就要放弃可移植性，需要可移植性就要放弃效率和灵活性。究竟取谁舍谁，就要根据需要而定。<br>
　　这一节将详细讨论如何设计程序通过控制"Video RAM"来达到控制字符显示的目的，也就是说这一节的程序是在硬件层上工作的。通过这一节的学习，我们将更深入地了解PC系统。具体内容包括系统内存的规划，显示内存与屏幕文字的对应关系等，这些知识有助于我们今后开发出更快速的程序。下面我们就来讨论第一个重要的内容：显示内存的地址。<br>
　　讲到这里我们有必要详细了解一下PC系统的内存规划，我们知道8086/88 处理机可以配备1MB内存，那么这些内存究竟是如何安排的呢？是不是所有的内存都可以装入代码呢？情况并非如我们想象的那样简单。图6-5反映了PC系统内存的分配情况：<br>
　　可以看到物理地址0A000H以下是运行程序的空间，我们在DOS的提示符下打入一个程序的名字，DOS就会将这个程序从磁盘读入这部分内存中运行。这部分空间从物理地址00000H至9FFFFH共640KB，一般称其为基本内存（Base Memory）或常规内存（Conversional Memory）。<br>
　　从0A000至0FFFFFH共384KB内存空间有专门用途，最高端的64KB（即0F0000H－0FFFFFH）分配给SYSTEM BIOS占用，而从0A0000H－0BFFFFH共128KB的内存空间分配给显示系统使用，其余空间保留给其它的扩充卡或由EMS管理程序使用。我们所关心的"Video RAM"就在0A0000H－0BFFFFH这一段空间内。这一段空间又可细分为以下几个部分：<br>
　　（1）EGA/VGA图形缓冲区：如果我们选择了EGA/VGA的图形模式，那么VRAM将出现在物理地址0A0000H－0AFFFFH这64KB空间中。<br>
　　（2）MDA文本缓冲区：这部分空间从物理地址0B0000H至0B7FFFH共32KB，由早期的MDA卡使用，由于MDA卡上只有4KB内存，所以它只使用0B000H-0B1000H共4KB地址空间。需要注意的是HGC卡（Hercules Graphics Card）使用整个32KB空间作为其图形缓冲区，同时它又兼容MDA卡。
</td>
<td></td><td></td> <!右边距>
</tr>

</font>

<!页脚线>
<tr valign="top">
<td></td><td colspan=20><hr></td><td></td>
</tr>
<!页脚>
<tr height=60 valign="top">
<td></td><td></td>
<td colspan=9><i>Copyright &copy; 2004-2005 <a href="mailto:webmaster@nucstorm.com">Chunk Lee</a></i></td>
<td colspan=9 align="right"><i><a href="http://www.nucstorm.com" target="_top">www.nucstorm.com</a></i></td>
<td></td><td></td>
</tr>
</table>
<!导航条>
<p align="right"><a href="content1.html">目录</a> <a href="page141.html">上一页</a> <a href="page143.html">下一页</a> <a href="page168.html">下一章</a></p>
</body>
</html>
