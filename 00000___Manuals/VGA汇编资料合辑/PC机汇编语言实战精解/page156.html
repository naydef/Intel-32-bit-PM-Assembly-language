<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<title>第6章 文字输出与键盘输入</title>
</head>

<body>
<style type="text/css">
body {
	background-color: #c0c0c0;
}

table {
	background-color: #c0c0c0;
	line-height: 24px;
}
</style>
<!导航条>
<p><a href="content1.html">目录</a> <a href="page155.html">上一页</a> <a href="page157.html">下一页</a> <a href="page168.html">下一章</a></p>
<table 	border=0 align="center" width=800 frame="box" rules="none">
<!标尺行>
<tr>
<td width=3%></td><td width=6%></td><td width=1%></td>
<td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td>
<td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td><td width=5%></td>
<td width=1%></td><td width=6%></td><td width=3%></td>
</tr>
<!页眉行>
<tr height=60 valign="bottom">
<td></td><td>-156-</td><td></td> <!页码>
<td colspan=6>PC机汇编语言实战精解</td><td colspan=4></td><td colspan=6 align="right"><img src="icons/flag.gif"></td> <!书名>
<td></td><td></td><td></td> <!右侧空白>
</tr>
<!页眉线>
<tr valign="top">
<td></td><td colspan=20><hr></td><td></td>
</tr>

<!正文>
<font face="宋体" lang="ZH-CN" size=3>
<tr height=20><td colspan=22></td></tr> <!顶部空白>

<tr>
<td></td><td></td> <!左边距>
<td colspan=18>
制电路却是以"字"为单位。所以我们在设定CRTC寄存器时应将字节偏移量转换成字偏移量。比如第二个显示页的偏移地址是1000H（字节），我们现在需要让第二个显示页出现在显示器上，就应该设定CRTC13为00H，而设定CRTC12为08H。请看下面的实验：
</td>
<td></td><td></td> <!右边距>
</tr>

<tr>
<td></td><td></td> <!左边距>
<td colspan=18>
C:\ASM\>DEBUG[Enter]<br>
-a100[Enter]
</td>
<td></td><td></td> <!右边距>
</tr>

<tr>
<td></td><td></td> <!左边距>
<td colspan=3>
0A9B:0100<br>
0A9B:0103<br>
0A9B:0105<br>
0A9B:0108<br>
0A9B:010B<br>
0A9B:010E<br>
0A9B:0110<br>
0A9B:0113<br>
0A9B:0115<br>
0A9B:0116<br>
0A9B:0117<br>
0A9B:0119<br>
0A9B:011A<br>
0A9B:011C<br>
0A9B:011E<br>
0A9B:011F<br>
0A9B:0121<br>
0A9B:0122<br>
0A9B:0123<br>
0A9B:0125<br>
0A9B:0126<br>
</td>
<td colspan=2>
MOV<br>
MOV<br>
MOV<br>
MOV<br>
MOV<br>
REPZ<br>
MOV<br>
MOV<br>
OUT<br>
INC<br>
MOV<br>
OUT<br>
MOV<br>
INT<br>
DEC<br>
MOV<br>
OUT<br>
INC<br>
MOV<br>
OUT<br>
INT<br>
</td>
<td colspan=5>
AX,B800<br>
ES,AX<br>
DI,1000<br>
AX,0241<br>
CX,0800<br>
STOSW<br>
DX,03D4<br>
AL,0C<br>
DX,AL<br>
DX<br>
AL,08<br>
DX,AL<br>
AH,00<br>
16<br>
DX<br>
AL,0C<br>
DX,AL<br>
DX<br>
AL,00<br>
DX,AL<br>
20<br>
</td>
<td colspan=8>
；初始化ES寄存器指向显示缓冲区<br>
<br>
；DI寄存器指向第一个显示页偏移地址<br>
；AX寄存器装入"绿色"的字符"A"<br>
；写入一个显示页的数据<br>
<br>
；DX指向索引寄存器<br>
；选择CRTC12寄存器<br>
；输出索引号<br>
；DX指向数据寄存器<br>
；输出第1显示页偏移地址高字节<br>
<br>
；等待键盘输入<br>
<br>
；DX指向索引寄存器<br>
；选择CRTC12寄存器<br>
；输出索引号<br>
；DX指向数据寄存器<br>
；输出第0显示页偏移地址的高字节<br>
<br>
；结束程序<br>
</td>
<td></td><td></td> <!右边距>
</tr>

<tr>
<td></td><td></td> <!左边距>
<td colspan=18>
　　键入命令"G=100 110"后屏幕上无任何反映，继续键入"G=110"后屏幕上出现了一片绿色的大写字母"A"，此时按下任意键屏幕上重新出现第一个显示页的内容。<br>
　　除了切换显示页之外，这两个寄存器还有一个重要的功能--滚动屏幕。因为PC机从未要求这两个寄存器必须装入每个显示页的起始地址，所以我们可以设想如果将CRTC12设为0，而将CRTC13设为50H话，那么我们就应该看到显示器上的字符向上滚动了一行。是否会有想象中的结果，请看下面的实验：
</td>
<td></td><td></td> <!右边距>
</tr>

<tr>
<td></td><td></td> <!左边距>
<td colspan=18>
C:\ASM\>DEBUG[Enter]<br>
-a100[Enter]
</td>
<td></td><td></td> <!右边距>
</tr>

<tr>
<td></td><td></td> <!左边距>
<td colspan=3>
0BFC:0100<br>
0BFC:0103<br>
0BFC:0105<br>
0BFC:0108<br>
0BFC:010B<br>
0BFC:010E
</td>
<td colspan=2>
MOV<br>
MOV<br>
MOV<br>
MOV<br>
MOV<br>
REPZ
</td>
<td colspan=5>
AX,B800<br>
ES,AX<br>
DI,0000<br>
AX,0141<br>
CX,0800<br>
STOSW
</td>
<td colspan=8>
；初始化ES寄存器指向显示缓冲区<br>
<br>
；DI寄存器指向第0个显示页<br>
；AX寄存器装入"蓝色"的"A"<br>
；写入一个显示页的数据<br>
<br>
</td>
<td></td><td></td> <!右边距>
</tr>

</font>

<!页脚线>
<tr valign="top">
<td></td><td colspan=20><hr></td><td></td>
</tr>
<!页脚>
<tr height=60 valign="top">
<td></td><td></td>
<td colspan=9><i>Copyright &copy; 2004-2005 <a href="mailto:webmaster@nucstorm.com">Chunk Lee</a></i></td>
<td colspan=9 align="right"><i><a href="http://www.nucstorm.com" target="_top">www.nucstorm.com</a></i></td>
<td></td><td></td>
</tr>
</table>
<!导航条>
<p align="right"><a href="content1.html">目录</a> <a href="page155.html">上一页</a> <a href="page157.html">下一页</a> <a href="page168.html">下一章</a></p>
</body>
</html>
